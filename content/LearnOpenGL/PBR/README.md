# PBR

## 理论

PBR (physically based rendering).

我们(尤其是美工) 可以基于物理参数编辑面的材质。基于物理参数编辑材质的一个好处是不用考虑光照条件就可以让这些材质看起来正确。                            。

基于物理渲染，而非物理渲染，其满足了三个条件:
* 基于微小平面模型
* 能量守恒
* 使用基于物理的BRDF

### 微平面模型
microfacet: 微平面，在微尺度上，任何平面都可以看成完美的反射镜面。

![](Media/microfacets.png)

反射结果如下

![](Media/microfacets_light_rays.png)

给定一个粗糙度参数，统计学上近似模拟面的微面粗糙度。这里计算微平面和半角向量 h 对齐的比率。h 为光线方向 l 和视觉方向 v 之间的半角向量。越多的微平面与半角向量对齐，镜面反射更锐利更强。

![](Media/ndf.png)

粗糙度越大，反射的形状越大，亮度越低

### 能量守恒